{
	"Changes": [
	
//	DATA

		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"FromFile": "options/cave/WaFF_Cave.tmx"
		},
//
		{
			"Action": "EditData",
			"Target": "Data/Locations",
			"Entries": {
				"{{ModId}}_Custom_waterfall_cave_WaFF": {
					"DisplayName": "Waterfall Cave",
					"DefaultArrivalTile": {
						"X": 57,
						"Y": 14
					},
					"ExcludeFromNpcPathfinding": true,
					"CreateOnLoad": {
						"MapPath": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
						"Type": null,
						"AlwaysActive": true
					},
					"FormerLocationNames": [ "Custom_waterfall_cave_WaFF" ],
					"CanPlantHere":true,
					"CanHaveGreenRainSpawns": true,
					"ArtifactSpots": [],
					"FishAreas": {},
					"Fish": [
						{
							"Chance": 0.4,
							"Season": null,
							"FishAreaId": null,
							"BobberPosition": null,
							"PlayerPosition": null,
							"MinFishingLevel": 0,
							"MinDistanceFromShore": 0,
							"MaxDistanceFromShore": -1,
							"ApplyDailyLuck": false,
							"CuriosityLureBuff": -1.0,
							"CatchLimit": -1,
							"IsBossFish": false,
							"SetFlagOnCatch": null,
							"RequireMagicBait": false,
							"Precedence": 0,
							"IgnoreFishDataRequirements": false,
							"CanBeInherited": true,
							"ChanceModifiers": null,
							"ChanceModifierMode": "Stack",
							"ChanceBoostPerLuckLevel": 0.0,
							"UseFishCaughtSeededRandom": false,
							"Condition": null,
							"Id": "(O)153|(O)156|(O)157",
							"ItemId": null,
							"RandomItemId": [
								"(O)153",
								"(O)156",
								"(O)157"
							],
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						},
						{
							"Chance": 0.1,
							"Season": null,
							"FishAreaId": null,
							"BobberPosition": null,
							"PlayerPosition": null,
							"MinFishingLevel": 0,
							"MinDistanceFromShore": 0,
							"MaxDistanceFromShore": -1,
							"ApplyDailyLuck": false,
							"CuriosityLureBuff": -1.0,
							"CatchLimit": -1,
							"IsBossFish": false,
							"SetFlagOnCatch": null,
							"RequireMagicBait": false,
							"Precedence": 0,
							"IgnoreFishDataRequirements": false,
							"CanBeInherited": true,
							"ChanceModifiers": null,
							"ChanceModifierMode": "Stack",
							"ChanceBoostPerLuckLevel": 0.0,
							"UseFishCaughtSeededRandom": false,
							"Condition": null,
							"Id": "(O)158",
							"ItemId": "(O)158",
							"RandomItemId": null,
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						}
					],
					"Forage": [
						{
							"Chance": 0.3,
							"Season": "Spring",
							"Condition": null,
							"Id": "(O)296|(O)396|(O)406|(O)410|(O)613|(O)634|(O)635|(O)636|(O)637|(O)638",
							"ItemId": null,
							"RandomItemId": [
								"(O)296",
								"(O)396",
								"(O)406",
								"(O)410",
								"(O)613",
								"(O)634",
								"(O)635",
								"(O)636",
								"(O)637",
								"(O)638"
							],
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						},
						{
							"Chance": 0.3,
							"Season": "Summer",
							"Condition": null,
							"Id": "(O)296|(O)396|(O)406|(O)410|(O)613|(O)634|(O)635|(O)636|(O)637|(O)638",
							"ItemId": null,
							"RandomItemId": [
								"(O)296",
								"(O)396",
								"(O)406",
								"(O)410",
								"(O)613",
								"(O)634",
								"(O)635",
								"(O)636",
								"(O)637",
								"(O)638"
							],
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						},
						{
							"Chance": 0.3,
							"Season": "Fall",
							"Condition": null,
							"Id": "(O)296|(O)396|(O)406|(O)410|(O)613|(O)634|(O)635|(O)636|(O)637|(O)638",
							"ItemId": null,
							"RandomItemId": [
								"(O)296",
								"(O)396",
								"(O)406",
								"(O)410",
								"(O)613",
								"(O)634",
								"(O)635",
								"(O)636",
								"(O)637",
								"(O)638"
							],
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						},
						{
							"Chance": 0.15,
							"Season": "Winter",
							"Condition": null,
							"Id": "(O)414",
							"ItemId": "(O)414",
							"RandomItemId": null,
							"MaxItems": null,
							"MinStack": -1,
							"MaxStack": -1,
							"Quality": -1,
							"ObjectInternalName": null,
							"ObjectDisplayName": null,
							"ToolUpgradeLevel": -1,
							"IsRecipe": false,
							"StackModifiers": null,
							"StackModifierMode": "Stack",
							"QualityModifiers": null,
							"QualityModifierMode": "Stack",
							"ModData": null,
							"PerItemCondition": null
						}
					],
					"MinDailyWeeds": 2,
					"MaxDailyWeeds": 5,
					"FirstDayWeedMultiplier": 15,
					"MinDailyForageSpawn": 1,
					"MaxDailyForageSpawn": 2,
					"MaxSpawnedForageAtOnce": 4,
					"ChanceForClay": 0.03,
					"Music": [],
					"MusicDefault": null,
					"MusicContext": "Default",
					"MusicIgnoredInRain": false,
					"MusicIgnoredInSpring": false,
					"MusicIgnoredInSummer": false,
					"MusicIgnoredInFall": false,
					"MusicIgnoredInFallDebris": false,
					"MusicIgnoredInWinter": false,
					"MusicIsTownTheme": false,
					"CustomFields": null
				}
			}
		},
//
		{
            "Action": "EditData",
            "Target": "Strings/Locations",
            "Entries": { "MineCart_Destination_WaFF_Cave": "{{i18n:WF_MN.Cave_Minecart}}" },
			"When": { 
				"FarmType": "A_TK.FarmProjectForaging/WaFF",
				"Use_Waterfall_Cave_WaFF": "True"
			}			
        },
//
		{
            "Action": "EditData",
            "Target": "Data/Minecarts",
            "TargetField": [ "Default", "Destinations" ],
            "Entries": {
                "WAFF_Cave_Minecart": {
                    "Id": "WAFF_Cave_Minecart",
                    "DisplayName": "[LocalizedText Strings\\Locations:MineCart_Destination_WaFF_Cave]",
                    "Condition": "LOCATION_ACCESSIBLE Railroad",
                    "TargetLocation": "{{ModId}}_Custom_waterfall_cave_WaFF",
                    "TargetTile": { "X": 49, "Y": 4 },
                    "TargetDirection": "left",
                }
			},
			"When": { 
				"FarmType": "A_TK.FarmProjectForaging/WaFF",
				"Use_Waterfall_Cave_WaFF": "True"
			}
        },
//
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "IsGreenhouse": "T" }
		},
//
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "ForceSpawnForageables": "T" }
		},
//
        {
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "EnableGrassSpread": "T" }
        },
//
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "CanBuildHere": "T" },
			"When": { 
				"FarmType": "A_TK.FarmProjectForaging/WaFF",
				"Use_Waterfall_Cave_WaFF": "True"
			}
		},
		
//	EXTERIOR ENTRANCES

        {
            "Action": "EditMap",
            "Target": "Maps/WaFF_Farm",
			"MapProperties": { "FarmCaveEntry": "34 6" }
        },
		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"AddWarps": [ "34 5 FarmCave 8 11" ]
		},
//
		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"FromFile": "options/WaFF_EX_Options.tmx",
			"FromArea": { "X": 116, "Y": 22, "Width": 7, "Height": 8 },
			"ToArea": { "X": 82, "Y": 0, "Width": 7, "Height": 8 },
			"PatchMode": "Replace",
			"When": { "Use_Waterfall_Cave_WaFF": "True" }
		},
//
		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"FromFile": "options/WaFF_EX_Options.tmx",
			"FromArea": { "X": 111, "Y": 22, "Width": 4, "Height": 4 },
			"ToArea": { "X": 2, "Y": 11, "Width": 4, "Height": 4 },
			"PatchMode": "Replace",
			"When": { "Use_Waterfall_Cave_WaFF": "True" }
		},
		
//	CAVE ADDITION

//	//	EXTERIOR

		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"AddWarps": [
				"86 5 {{ModId}}_Custom_waterfall_cave_WaFF 57 14",
				"3 13 {{ModId}}_Custom_waterfall_cave_WaFF 5 41",
				"4 13 {{ModId}}_Custom_waterfall_cave_WaFF 5 41",
				"153 81 {{ModId}}_Custom_waterfall_cave_WaFF 71 45"
			],
			"When": { "Use_Waterfall_Cave_WaFF": "True" }
		},
//
		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"FromFile": "options/WaFF_EX_Options.tmx",
			"FromArea": { "X": 32, "Y": 24, "Width": 4, "Height": 2 },
			"ToArea": { "X": 58, "Y": 92, "Width": 4, "Height": 2 },
			"PatchMode": "Replace",
			"When": {
				"Use_Waterfall_Cave_WaFF": "True",
				"Beach_Type_WaFF": "Sea"
			}
		},
		{
			"Action": "EditMap",
			"Target": "Maps/WaFF_Farm",
			"FromFile": "options/WaFF_EX_Options.tmx",
			"FromArea": { "X": 32, "Y": 21, "Width": 4, "Height": 2 },
			"ToArea": { "X": 58, "Y": 92, "Width": 4, "Height": 2 },
			"PatchMode": "Replace",
			"When": {
				"Use_Waterfall_Cave_WaFF": "True",
				"Beach_Type_WaFF": "Lake, Dry, Dry_Pond"
			}
		},

//	//	INTERIOR

		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"AddWarps": [
				"57 15 Farm 86 6",			
				"0 44 Farm 4 15",				
				"0 45 Farm 4 15"			
			],
			"When": { "Use_Waterfall_Cave_WaFF": "True" }
		},
//
        {
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "AmbientLight": "90 90 35" }
        },
//
        {
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "indoorWater": "T" }
        },		
//
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Custom_waterfall_cave_WaFF",
			"MapProperties": { "CanCaskHere": "T" },
			"When": {
				"Use_Waterfall_Cave_WaFF": "True",
				"Cellar_Allows_Casks_in_Cave_WaFF": "True",
				"FarmhouseUpgrade": 3
			}
		}
	]
}	  